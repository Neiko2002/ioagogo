apply plugin: 'java'
apply plugin: 'checkstyle'

repositories {
  jcenter()
}

configurations {
  commandJars
}

sourceSets {
  command
}

dependencies {
  commandJars "commons-cli:commons-cli:1.2"

  commandCompile "commons-cli:commons-cli:1.2"
  commandCompile sourceSets.main.output

  testCompile "junit:junit:4.11"
  testCompile "org.mockito:mockito-core:1.+"
  testCompile "org.hamcrest:hamcrest-all:1.3"
}

checkstyle {
  toolVersion '6.1.1'
}

allprojects {
  tasks.withType(JavaCompile) {
    options.compilerArgs << "-Xlint:unchecked"
  }
}

task commandJar(type: Jar) {
  from sourceSets.command.output, sourceSets.main.output
  from configurations.commandJars.collect { zipTree(it) }

  manifest {
    attributes "Main-Class": "com.emilong.ioagogo.benchmark.IOAGoGo"
  }
}
